<!DOCTYPE html>
<html>
<head>
    <title>Learning Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <img src="logo.jpg" alt="LMS Logo" height="100" width="100">
        <h1>LMS - Learning Management System</h1>
    </header>
    <div id="nav">
        <a href="index.html">Homepage</a>
    </div>
    <main>
        <div id="term-select">
            <br><br>
            Select Term:  
            <select>
                <option>Winter 2025</option>
                <option>Spring 2024</option>
                <option>Summer 2024</option>
                <option>Fall 2024</option>
            </select>
        </div>
        <div id="enrolled-courses">
            <h2>Enrolled Courses</h2>
            <hr>
            <table class="course-view">
                <tr>
                    <td class="table-data">
                        <img src="course1.jpg" alt="Registered Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Web Development</span>
                        <br><br>
                        <span class="course-code">Course Code: WD381</span>
                        <br><br>
                        <a href="attempt_quiz.html">Attempt Quiz</a>
                    </td>
                    <td class="table-data">
                        <img src="course1.jpg" alt="Registered Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Data Structures</span>
                        <br><br>
                        <span class="course-code">Course Code: DS371</span>
                        <br><br>
                        <a href="attempt_quiz.html">Attempt Quiz</a>
                    </td>
                    <td class="table-data">
                        <img src="course1.jpg" alt="Registered Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: DBMS</span>
                        <br><br>
                        <span class="course-code">Course Code: DB346</span>
                        <br><br>
                        <a href="attempt_quiz.html">Attempt Quiz</a>
                    </td class="table-data">
                </tr>
                <tr>
                    <td class="table-data">
                        <img src="course1.jpg" alt="Registered Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Software Testing</span>
                        <br><br>
                        <span class="course-code">Course Code: ST484</span>
                        <br><br>
                        <a href="attempt_quiz.html">Attempt Quiz</a>
                    </td class="table-data">
                    <td class="table-data">
                        <img src="course1.jpg" alt="Registered Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Software Architectures</span>
                        <br><br>
                        <span class="course-code">Course Code: SA396</span>
                        <br><br>
                        <a href="attempt_quiz.html">Attempt Quiz</a>
                    </td>
                </tr>
            </table>
        </div>
        <div id="pending-courses">
            <h2>Pending Invitations</h2>
            <hr>
            <table class="course-view">
                <tr>
                    <td class="table-data">
                        <img src="course2.jpg" alt="Pending Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Data Science</span>
                        <br><br>
                        <span class="course-code">Course Code: DS102</span>
                        <br><br>
                        <button class="accept-btn">Accept</button>
                        <button class="decline-btn">Decline</button>
                    </td>
                    <td class="table-data">
                        <img src="course2.jpg" alt="Pending Course Item Image" width="256" height="192">
                        <br><br>
                        <span class="course-name">Course Name: Machine Learning</span>
                        <br><br>
                        <span class="course-code">Course Code: ML105</span>
                        <br><br>
                        <button class="accept-btn">Accept</button>
                        <button class="decline-btn">Decline</button>
                    </td>
                </tr>
            </table>
        </div>
    </main>
    <footer>
        <br>
        &copy 2025 LMS. All rights reserved.
    </footer>
    
    <script>
        let enrolledDiv = document.getElementById("enrolled-courses");
        let pendingDiv = document.getElementById("pending-courses");
        let enrolledTable = enrolledDiv.getElementsByClassName("course-view");
        let pendingTable = pendingDiv.getElementsByClassName("course-view");
        let acceptButtons = pendingTable[0].getElementsByClassName("accept-btn");
        let declineButtons = pendingTable[0].getElementsByClassName("decline-btn");

        let numItemsInRow = enrolledTable[0].firstElementChild.children.length;

        Array.from(acceptButtons).forEach(element => {
            element.addEventListener("click", () => {
                if (numItemsInRow >= 3) {
                    enrolledTable[0].firstElementChild.appendChild(enrolledTable[0].firstElementChild.cloneNode(false));
                    numItemsInRow = 0;
                }
            
                let movedCourse = enrolledTable[0].firstElementChild.firstElementChild.firstElementChild.cloneNode(true);

                // Update the data of the copied one to this element's info
                movedCourse.getElementsByClassName("course-name")[0].textContent = element.parentElement.getElementsByClassName("course-name")[0].textContent;
                movedCourse.getElementsByClassName("course-code")[0].textContent = element.parentElement.getElementsByClassName("course-code")[0].textContent;

                movedCourse.addEventListener("mouseover", () => {
                    movedCourse.style.backgroundColor = "#ffffff";
                });

                movedCourse.addEventListener("mouseleave", () => {
                    movedCourse.style.backgroundColor = "#e6f2ff";
                });
                
                enrolledTable[0].firstElementChild.lastElementChild.appendChild(movedCourse);
                element.parentNode.parentNode.removeChild(element.parentElement);
                numItemsInRow++;
            });
        });

        Array.from(declineButtons).forEach(element => {
            element.addEventListener("click", () => {
                element.parentNode.parentNode.removeChild(element.parentElement);
            });
        });

        let enrolledTableData = enrolledTable[0].getElementsByClassName("table-data");
        let pendingTableData = pendingTable[0].getElementsByClassName("table-data");

        Array.from(enrolledTableData).forEach(tableData => {
            tableData.addEventListener("mouseover", () => {
                tableData.style.backgroundColor = "#ffffff";
            });

            tableData.addEventListener("mouseleave", () => {
                tableData.style.backgroundColor = "#e6f2ff";
            });
        });

        Array.from(pendingTableData).forEach(tableData => {
            tableData.addEventListener("mouseover", () => {
                tableData.style.backgroundColor = "#ffffff";
            });

            tableData.addEventListener("mouseleave", () => {
                tableData.style.backgroundColor = "#e6f2ff";
            });
        });
   </script>
</body>
</html>